<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XR Social Platform</title>
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Archivo:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-left">
            <a href="#" class="logo" onclick="navigateTo('home')">XR</a>
            <ul class="nav-links" id="mainNavLinks">
                <li><a href="#" class="nav-link active" data-page="home" onclick="navigateTo('home')">Home</a></li>
                <li><a href="#" class="nav-link" data-page="rooms" onclick="navigateTo('rooms')">Rooms</a></li>
                <li id="profileNavItem"><a href="#" class="nav-link" data-page="profile" onclick="navigateTo('profile')">Profile</a></li>
            </ul>
        </div>
        <button class="login-btn" id="authButton" onclick="showLoginPage()">
            Login
        </button>
        <div class="theme-toggle" onclick="toggleTheme()">
            <div class="theme-toggle-slider" id="themeSlider"></div>
        </div>
    </nav>

    <!-- Main Container -->
    <div class="container" id="mainContainer">
        <!-- Login Page -->
        <div id="loginPage" class="page" style="display: none;">
            <div class="auth-container">
                <div class="auth-card">
                    <div class="auth-header">
                        <div class="auth-logo">XR</div>
                        <h2 class="auth-title">Welcome Back</h2>
                        <p class="auth-subtitle">Sign in to continue your XR journey</p>
                    </div>

                    <form class="auth-form" onsubmit="handleLogin(event)">
                        <div class="form-group">
                            <label class="form-label" for="loginEmail">Email Address</label>
                            <input type="email" id="loginEmail" class="form-input" placeholder="you@example.com" required>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="loginPassword">Password</label>
                            <div class="password-input-wrapper">
                                <input type="password" id="loginPassword" class="form-input" placeholder="Enter your password" required>
                                <button type="button" class="toggle-password" onclick="togglePasswordVisibility('loginPassword', this)">
                                    üëÅÔ∏è
                                </button>
                            </div>
                        </div>

                        <div class="form-options">
                            <div class="checkbox-wrapper">
                                <input type="checkbox" id="rememberMe">
                                <label for="rememberMe">Remember me</label>
                            </div>
                            <a href="#" class="forgot-password">Forgot password?</a>
                        </div>

                        <button type="submit" class="auth-submit">Sign In</button>
                    </form>

                    <div class="divider">
                        <span class="divider-text">or continue with</span>
                    </div>

                    <div class="social-login">
                        <button class="social-btn" onclick="socialLogin('google')">
                            <span>G</span>
                            <span>Google</span>
                        </button>
                        <button class="social-btn" onclick="socialLogin('github')">
                            <span>‚ö°</span>
                            <span>GitHub</span>
                        </button>
                    </div>

                    <div class="auth-footer">
                        Don't have an account? <a href="#" onclick="showRegisterPage()">Create New Account</a>
                    </div>
                </div>
            </div>
        </div>

        <div id="blogViewPage" class="page" style="display: none;">
            <div class="profile-container">
                <button class="leave-btn" onclick="navigateTo('home')" style="margin-bottom: 1rem;">‚Üê Back</button>
                <div id="fullBlogContent">
                    </div>
                
                <div class="profile-blogs" style="margin-top: 2rem;">
                    <h3 class="blogs-title">Comments</h3>
                    <div id="commentsList" class="blog-list" style="margin-bottom: 2rem;">
                        </div>
                    
                    <div class="form-group">
                        <label class="form-label">Leave a comment</label>
                        <textarea id="commentInput" class="form-input" placeholder="What are your thoughts?"></textarea>
                        <button class="auth-submit" style="margin-top: 1rem; width: auto;" onclick="submitComment()">Post Comment</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Register Page -->
        <div id="registerPage" class="page" style="display: none;">
            <div class="auth-container">
                <div class="auth-card">
                    <div class="auth-header">
                        <div class="auth-logo">XR</div>
                        <h2 class="auth-title">Create Your Account</h2>
                        <p class="auth-subtitle">Join the XR community today</p>
                    </div>

                    <form class="auth-form" onsubmit="handleRegister(event)">
                        <div class="form-group row">
                            <div class="form-field">
                                <label class="form-label" for="firstName">First Name</label>
                                <input type="text" id="firstName" class="form-input" placeholder="Ahmed" required>
                            </div>
                            <div class="form-field">
                                <label class="form-label" for="lastName">Last Name</label>
                                <input type="text" id="lastName" class="form-input" placeholder="Shawky" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="registerUsername">Username</label>
                            <input type="text" id="registerUsername" class="form-input" placeholder="@your_username" required>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="registerEmail">Email Address</label>
                            <input type="email" id="registerEmail" class="form-input" placeholder="you@example.com" required>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="registerPassword">Password</label>
                            <div class="password-input-wrapper">
                                <input type="password" id="registerPassword" class="form-input" placeholder="Create a strong password" required>
                                <button type="button" class="toggle-password" onclick="togglePasswordVisibility('registerPassword', this)">
                                    üëÅÔ∏è
                                </button>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="confirmPassword">Confirm Password</label>
                            <div class="password-input-wrapper">
                                <input type="password" id="confirmPassword" class="form-input" placeholder="Confirm your password" required>
                                <button type="button" class="toggle-password" onclick="togglePasswordVisibility('confirmPassword', this)">
                                    üëÅÔ∏è
                                </button>
                            </div>
                        </div>

                        <div class="form-options">
                            <div class="checkbox-wrapper">
                                <input type="checkbox" id="agreeTerms" required>
                                <label for="agreeTerms">I agree to Terms & Conditions</label>
                            </div>
                        </div>

                        <button type="submit" class="auth-submit">Create Account</button>
                    </form>

                    <div class="divider">
                        <span class="divider-text">or sign up with</span>
                    </div>

                    <div class="social-login">
                        <button class="social-btn" onclick="socialLogin('google')">
                            <span>G</span>
                            <span>Google</span>
                        </button>
                        <button class="social-btn" onclick="socialLogin('github')">
                            <span>‚ö°</span>
                            <span>GitHub</span>
                        </button>
                    </div>

                    <div class="auth-footer">
                        Already have an account? <a href="#" onclick="showLoginPage()">Sign In</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Home Page (Default) -->
        <div id="homePage" class="page active">
            <div class="home-hero">
                <h1 class="hero-title">Welcome to XR Community</h1>
                <p class="hero-subtitle">Connect, Create, and Collaborate in Virtual Reality</p>
                
                <div class="home-actions">
                    <button class="create-room-btn" onclick="openCreateRoomModal()">
                          <div style="color: var(--inside-box)"> + Create New Room </div>
                    </button>
                    <button class="create-room-btn" onclick="openCreateBlogModal()" style="background: linear-gradient(135deg, var(--accent-secondary), var(--accent-primary));">
                        <div style="color: var(--inside-box)"> + Write a Blog </div> 
                    </button>
                </div>
            </div>

            <div class="home-blogs-section">
                <div class="section-header">
                    <h2 class="section-title">Latest Blogs from Community</h2>
                    <div class="blog-search">
                        <input type="text" class="search-input" placeholder="Search blogs..." id="blogSearch" onkeyup="searchBlogs()">
                    </div>
                </div>
                <div class="home-blogs-grid" id="homeBlogsGrid">
                    <!-- Blogs will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Rooms Page -->
        <div id="roomsPage" class="page" style="display: none;">
            <div class="rooms-section">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; gap: 2rem;">
                    <h2 class="section-title">Available Rooms</h2>
                    <button class="create-room-btn" onclick="openCreateRoomModal()">
                        <div style="color: var(--inside-box)"> + Create New Room </div>
                    </button>
                </div>
                <div class="room-search">
                    <input type="text" class="search-input" placeholder="Search rooms..." id="roomSearch" onkeyup="searchRooms()">
                </div>
                <div class="rooms-grid" id="roomsGrid">
                    <!-- Rooms will be loaded here dynamically -->
                </div>
            </div>
        </div>

        <!-- Room Chat Page -->
        <div id="chatPage" class="page" style="display: none;">
            <div class="chat-container">
                <div class="chat-main">
                    <div class="chat-header">
                        <h2 class="chat-room-title" id="chatRoomTitle">Room Name</h2>
                        <button class="leave-btn" onclick="leaveRoom()">‚Üê Leave Room</button>
                    </div>
                    <div class="chat-messages" id="chatMessages">
                        <!-- Messages will be loaded here -->
                    </div>
                    <div class="chat-input-container">
                        <input type="text" class="chat-input" placeholder="Type a message..." id="messageInput" onkeypress="handleMessageKeyPress(event)">
                        <button class="send-btn" onclick="sendMessage()">Send</button>
                    </div>
                </div>
                <div class="participants-sidebar">
                    <h3 class="participants-title">
                        <span>üë•</span>
                        <span>Participants (<span id="participantCount">0</span>)</span>
                    </h3>
                    <div class="participant-list" id="participantList">
                        <!-- Participants will be loaded here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Profile Page -->
        <div id="profilePage" class="page" style="display: none;">
            <div class="profile-container">
                <div class="profile-header">
                    <div class="profile-avatar-large" id="profileAvatar">U</div>
                    <div class="profile-info">
                        <h1 class="profile-name" id="profileName">User Name</h1>
                        <p class="profile-username" id="profileUsername">@username</p>
                        <div class="profile-stats">
                            <div class="stat-item">
                                <div class="stat-value" id="roomsCreated">0</div>
                                <div class="stat-label">Rooms Created</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="blogsPublished">0</div>
                                <div class="stat-label">Blogs Published</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="totalConnections">0</div>
                                <div class="stat-label">Connections</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="profile-blogs">
                    <div class="blogs-header">
                        <h2 class="blogs-title">My Blogs</h2>
                        <button class="create-blog-btn" onclick="openCreateBlogModal()">+ New Blog</button>
                    </div>
                    <div class="blog-list" id="blogList">
                        <!-- Blogs will be loaded here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Create Room Modal -->
    <div class="modal" id="createRoomModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Create New Room</h2>
                <button class="close-modal" onclick="closeModal('createRoomModal')">√ó</button>
            </div>
            <form onsubmit="createRoom(event)">
                <div class="form-group">
                    <label class="form-label">Room Name</label>
                    <input type="text" class="form-input" id="roomName" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Description</label>
                    <textarea class="form-input form-textarea" id="roomDescription" required></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Room Type</label>
                    <div class="room-type-toggle">
                        <div class="toggle-option active" data-type="public" onclick="selectRoomType('public')">Public</div>
                        <div class="toggle-option" data-type="private" onclick="selectRoomType('private')">Private üîí</div>
                    </div>
                    <input type="hidden" id="roomType" value="public">
                </div>
                <div class="form-group" id="accessCodeGroup" style="display: none;">
                    <label class="form-label">Access Code (for private room)</label>
                    <input type="text" class="form-input" id="roomAccessCode" placeholder="Enter a code for private room access">
                    <span style="font-size: 0.85rem; color: var(--text-tertiary); margin-top: 0.3rem; display: block;">Members will need this code to join your private room</span>
                </div>
                <button type="submit" class="form-submit">Create Room</button>
            </form>
        </div>
    </div>

    <!-- Create Blog Modal -->
    <div class="modal" id="createBlogModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Create New Blog</h2>
                <button class="close-modal" onclick="closeModal('createBlogModal')">√ó</button>
            </div>
            <form onsubmit="createBlog(event)">
                <div class="form-group">
                    <label class="form-label">Blog Title</label>
                    <input type="text" class="form-input" id="blogTitle" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Content</label>
                    <textarea class="form-input form-textarea" id="blogContent" rows="8" required></textarea>
                </div>
                <button type="submit" class="form-submit">Publish Blog</button>
            </form>
        </div>
    </div>

    <!-- Access Code Modal for Private Rooms -->
    <div class="modal" id="accessCodeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Enter Access Code</h2>
                <button class="close-modal" onclick="closeModal('accessCodeModal')">√ó</button>
            </div>
            <div style="padding: 1rem 0;">
                <div class="form-group">
                    <label class="form-label">Access Code</label>
                    <input type="text" class="form-input" id="accessCodeInput" placeholder="Enter the room access code" required>
                    <span id="accessCodeError" style="color: #ff4d4d; font-size: 0.9rem; margin-top: 0.5rem; display: block;"></span>
                </div>
                <button id="accessCodeSubmit" class="form-submit" style="margin-top: 1.5rem;">Join Room</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>

    <!-- Socket.IO Client (Replace with your actual Socket.IO server) -->
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
</body>
</html>